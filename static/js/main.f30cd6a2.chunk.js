(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c,o=n(1),a=n.n(o),r=n(6),s=n.n(r),l=(n(11),n(12),n(13),n(0)),i=n(3),d=n(2);!function(e){e.All="all",e.Active="active",e.Completed="completed"}(c||(c={}));var u="https://mate.academy/students-api";function j(e){return new Promise((function(t){setTimeout(t,e)}))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:t};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),j(100).then((function(){return fetch(u+e,c)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var m=function(e){return b(e)},f=a.a.createContext({todos:[],setTodos:function(e){},status:c.All,setStatus:function(e){},errorMessage:null,closeErrorMessage:function(){}}),O=function(e){var t=e.children,n=Object(o.useState)([]),a=Object(d.a)(n,2),r=a[0],s=a[1],i=Object(o.useState)(c.All),u=Object(d.a)(i,2),j=u[0],b=u[1],O=Object(o.useState)(null),p=Object(d.a)(O,2),h=p[0],x=p[1];Object(o.useEffect)((function(){var e;(e=12048,m("/todos?userId=".concat(e))).then(s).catch((function(){return x("Unable to load todos"),void setTimeout((function(){return x(null)}),3e3)}))}),[]);var v={todos:r,setTodos:s,status:j,setStatus:b,errorMessage:h,closeErrorMessage:function(){return x(null)}};return Object(l.jsx)(f.Provider,{value:v,children:t})},p=(n(15),function(){var e=Object(o.useContext)(f),t=e.todos,n=e.setTodos,c=t.length>0&&t.every((function(e){return e.completed}));return Object(l.jsx)(l.Fragment,{children:!!t.length&&Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("button",{type:"button",id:"toggle-all",className:"todoapp__toggle-all ".concat(c?"active":""),"data-cy":"ToggleAllButton",onClick:function(){var e=t.every((function(e){return e.completed}));n(t.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{completed:!e})})))}})})})}),h=n(4),x=n.n(h),v=function(e){var t=e.todo,n=Object(o.useContext)(f),c=n.todos,a=n.setTodos,r=t.id,s=t.title,u=t.completed,j=Object(o.useState)(s),b=Object(d.a)(j,2),m=b[0],O=b[1],p=Object(o.useState)(!1),h=Object(d.a)(p,2),v=h[0],g=h[1],y=Object(o.useRef)(null);Object(o.useEffect)((function(){y.current&&y.current.focus()}),[v]);var k=function(e){e.trim()?(a(c.map((function(t){return t.id===r?Object(i.a)(Object(i.a)({},t),{},{title:e.trim()}):t}))),O(e.trim())):a(c.filter((function(e){return e.id!==r}))),g(!1)};return Object(l.jsxs)("div",{className:x()("todo",{completed:!v&&u}),children:[Object(l.jsx)("label",{className:"todo__status-label",children:Object(l.jsx)("input",{"data-cy":"TodoStatus",type:"checkbox",className:"todo__status",onChange:function(){a(c.map((function(e){return e.id===r?Object(i.a)(Object(i.a)({},e),{},{completed:!u}):e})))},checked:u})}),v?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("form",{children:Object(l.jsx)("input",{type:"text","data-cy":"TodoTitleField",className:"todo__title-field",placeholder:"Empty todo will be deleted",ref:y,onChange:function(e){O(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&y.current&&k(y.current.value),"Escape"===e.key&&(O(s),g(!1))},onBlur:function(){y.current&&k(y.current.value)},value:m})}),Object(l.jsxs)("div",{"data-cy":"TodoLoader",className:"modal overlay",children:[Object(l.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(l.jsx)("div",{className:"loader"})]})]}):Object(l.jsx)("span",{onDoubleClick:function(){return g(!0)},className:"todo__title","data-cy":"TodoTitle",children:s}),Object(l.jsx)("button",{type:"button",className:"todo__remove","data-cy":"TodoDelete","aria-label":"deleteTodo",onClick:function(){a(c.filter((function(e){return e.id!==r})))},children:"\xd7"}),Object(l.jsxs)("div",{"data-cy":"TodoLoader",className:"modal overlay",children:[Object(l.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(l.jsx)("div",{className:"loader"})]})]})},g=(n(16),function(){var e=Object(o.useContext)(f),t=e.todos,n=e.status,c=Object(o.useState)(t),a=Object(d.a)(c,2),r=a[0],s=a[1];return Object(o.useEffect)((function(){switch(n){case"active":s(t.filter((function(e){return!e.completed})));break;case"completed":s(t.filter((function(e){return e.completed})));break;default:s(t)}}),[n,t]),Object(l.jsx)(l.Fragment,{children:!!t.length&&Object(l.jsx)(l.Fragment,{children:r.map((function(e){return Object(l.jsx)(v,{todo:e},e.id)}))})})}),y=[{name:"All",link:c.All},{name:"Active",link:c.Active},{name:"Completed",link:c.Completed}],k=function(){var e=Object(o.useContext)(f),t=e.status,n=e.setStatus,c=Object(o.useState)(t),a=Object(d.a)(c,2),r=a[0],s=a[1];return Object(l.jsx)("nav",{className:"filter","data-cy":"Filter",children:y.map((function(e){return Object(l.jsx)("a",{href:"#/".concat(e.link),className:x()("filter__link",{selected:r===e.link}),onClick:function(){return t=e.link,s(t),void n(t);var t},children:e.name},+e.link)}))})},N=function(){var e=Object(o.useContext)(f),t=e.todos,n=e.setTodos;return t.filter((function(e){return e.completed})).length>0?Object(l.jsx)("button",{type:"button",className:"todoapp__clear-completed","data-cy":"ClearCompletedButton",onClick:function(){n(t.filter((function(e){return!e.completed})))},children:"Clear completed"}):null},_=function(){var e=Object(o.useContext)(f).todos;return Object(l.jsx)(l.Fragment,{children:!!e.length&&Object(l.jsxs)("footer",{className:"todoapp__footer","data-cy":"Footer",children:[Object(l.jsx)("span",{className:"todo-count","data-cy":"TodosCounter",children:"".concat(e.filter((function(e){return!e.completed})).length," items left")}),Object(l.jsx)(k,{}),Object(l.jsx)(N,{})]})})},C=function(e){var t=e.message,n=e.onClose;return Object(l.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal ".concat(t?"":"hidden"),children:[Object(l.jsx)("button",{"data-cy":"HideErrorButton",type:"button",className:"delete",onClick:n}),t]})},T=function(){var e=Object(o.useContext)(f),t=e.errorMessage,n=e.closeErrorMessage;return Object(l.jsxs)("div",{className:"todoapp",children:[Object(l.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(l.jsxs)("div",{className:"todoapp__content",children:[Object(l.jsxs)("header",{className:"todoapp__header",children:[Object(l.jsx)(p,{}),Object(l.jsx)("form",{children:Object(l.jsx)("input",{"data-cy":"NewTodoField",type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?"})})]}),Object(l.jsx)("section",{className:"todoapp__main","data-cy":"TodoList",children:Object(l.jsx)(g,{})}),Object(l.jsx)(_,{})]}),Object(l.jsx)(C,{message:t,onClose:n})]})};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(O,{children:Object(l.jsx)(T,{})})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.f30cd6a2.chunk.js.map